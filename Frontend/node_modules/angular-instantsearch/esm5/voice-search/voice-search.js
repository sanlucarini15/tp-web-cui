/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Inject, forwardRef, NgZone, ContentChild, TemplateRef, } from '@angular/core';
import { connectVoiceSearch } from 'instantsearch.js/es/connectors';
import { BaseWidget } from '../base-widget';
import { NgAisInstantSearch } from '../instantsearch/instantsearch';
import { noop } from '../utils';
var NgAisVoiceSearch = /** @class */ (function (_super) {
    tslib_1.__extends(NgAisVoiceSearch, _super);
    function NgAisVoiceSearch(instantSearchParent, zone) {
        var _this = _super.call(this, 'VoiceSearch') || this;
        _this.instantSearchParent = instantSearchParent;
        _this.zone = zone;
        _this.buttonTitle = 'Search by voice';
        _this.disabledButtonTitle = 'Search by voice (not supported on this browser)';
        _this.state = {
            isBrowserSupported: undefined,
            isListening: undefined,
            toggleListening: noop,
            voiceListeningState: {
                status: 'initial',
                transcript: '',
                isSpeechFinal: false,
                errorCode: undefined,
            },
            templateContext: {
                status: 'initial',
                errorCode: undefined,
                transcript: '',
                isSpeechFinal: false,
                isListening: false,
                isBrowserSupported: false,
            },
        };
        _this.handleClick = (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            ((/** @type {?} */ (event.currentTarget))).blur();
            _this.state.toggleListening();
        });
        _this.isNotAllowedError = (/**
         * @return {?}
         */
        function () {
            return _this.state.voiceListeningState.status === 'error' &&
                _this.state.voiceListeningState.errorCode === 'not-allowed';
        });
        _this.updateState = (/**
         * @param {?} state
         * @return {?}
         */
        function (state) {
            _this.zone.run((/**
             * @return {?}
             */
            function () {
                _this.state = tslib_1.__assign({}, state, { templateContext: {
                        status: state.voiceListeningState.status,
                        errorCode: state.voiceListeningState.errorCode,
                        transcript: state.voiceListeningState.transcript,
                        isSpeechFinal: state.voiceListeningState.isSpeechFinal,
                        isListening: state.isListening,
                        isBrowserSupported: state.isBrowserSupported,
                    } });
            }));
        });
        return _this;
    }
    /**
     * @return {?}
     */
    NgAisVoiceSearch.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.createWidget(connectVoiceSearch, {
            searchAsYouSpeak: this.searchAsYouSpeak,
        });
        _super.prototype.ngOnInit.call(this);
    };
    NgAisVoiceSearch.decorators = [
        { type: Component, args: [{
                    selector: 'ais-voice-search',
                    template: "\n    <div [class]=\"cx()\">\n      <button\n        type=\"button\"\n        [class]=\"cx('button')\"\n        [title]=\"state.isBrowserSupported ? buttonTitle : disabledButtonTitle\"\n        [disabled]=\"!state.isBrowserSupported\"\n        (click)=\"handleClick($event)\"\n      >\n        <ng-container *ngTemplateOutlet=\"button ? button : defaultButton; context: state.templateContext\"></ng-container>\n      </button>\n      <div [class]=\"cx('status')\">\n        <ng-container *ngTemplateOutlet=\"status ? status : defaultStatus; context: state.templateContext\"></ng-container>\n      </div>\n    </div>\n\n    <ng-template #defaultButton let-status=\"status\" let-errorCode=\"errorCode\" let-isListening=\"isListening\">\n      <svg\n        xmlns='http://www.w3.org/2000/svg'\n        width='16'\n        height='16'\n        viewBox='0 0 24 24'\n        fill='none'\n        stroke='currentColor'\n        strokeWidth='2'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      >\n        <ng-container *ngIf=\"isNotAllowedError(); then errorSvgContent else normalSvgContent\">\n        </ng-container>\n        <ng-template #errorSvgContent>\n          <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\"></line>\n          <path d=\"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6\"></path>\n          <path d=\"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23\"></path>\n          <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\n          <line x1=\"8\" y1=\"23\" x2=\"16\" y2=\"23\"></line>\n        </ng-template>\n        <ng-template #normalSvgContent>\n          <path\n            d=\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\"\n            [attr.fill]=\"isListening ? 'currentColor' : 'none'\"\n          ></path>\n          <path d=\"M19 10v2a7 7 0 0 1-14 0v-2\"></path>\n          <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\n          <line x1=\"8\" y1=\"23\" x2=\"16\" y2=\"23\"></line>\n        </ng-template>\n      </svg>\n    </ng-template>\n    <ng-template #defaultStatus let-transcript=\"transcript\">\n      <p>{{transcript}}</p>\n    </ng-template>\n  "
                }] }
    ];
    /** @nocollapse */
    NgAisVoiceSearch.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [forwardRef((/**
                         * @return {?}
                         */
                        function () { return NgAisInstantSearch; })),] }] },
        { type: NgZone }
    ]; };
    NgAisVoiceSearch.propDecorators = {
        button: [{ type: ContentChild, args: ['button',] }],
        status: [{ type: ContentChild, args: ['status',] }],
        searchAsYouSpeak: [{ type: Input }],
        buttonTitle: [{ type: Input }],
        disabledButtonTitle: [{ type: Input }]
    };
    return NgAisVoiceSearch;
}(BaseWidget));
export { NgAisVoiceSearch };
if (false) {
    /** @type {?} */
    NgAisVoiceSearch.prototype.button;
    /** @type {?} */
    NgAisVoiceSearch.prototype.status;
    /** @type {?} */
    NgAisVoiceSearch.prototype.searchAsYouSpeak;
    /** @type {?} */
    NgAisVoiceSearch.prototype.buttonTitle;
    /** @type {?} */
    NgAisVoiceSearch.prototype.disabledButtonTitle;
    /** @type {?} */
    NgAisVoiceSearch.prototype.state;
    /** @type {?} */
    NgAisVoiceSearch.prototype.handleClick;
    /** @type {?} */
    NgAisVoiceSearch.prototype.isNotAllowedError;
    /** @type {?} */
    NgAisVoiceSearch.prototype.updateState;
    /** @type {?} */
    NgAisVoiceSearch.prototype.instantSearchParent;
    /**
     * @type {?}
     * @private
     */
    NgAisVoiceSearch.prototype.zone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidm9pY2Utc2VhcmNoLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1pbnN0YW50c2VhcmNoLyIsInNvdXJjZXMiOlsidm9pY2Utc2VhcmNoL3ZvaWNlLXNlYXJjaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixVQUFVLEVBQ1YsTUFBTSxFQUNOLFlBQVksRUFFWixXQUFXLEdBRVosTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDcEUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzVDLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxVQUFVLENBQUM7QUE0Q2hDO0lBdURzQyw0Q0FBVTtJQThCOUMsMEJBRVMsbUJBQXdCLEVBQ3ZCLElBQVk7UUFIdEIsWUFLRSxrQkFBTSxhQUFhLENBQUMsU0FDckI7UUFKUSx5QkFBbUIsR0FBbkIsbUJBQW1CLENBQUs7UUFDdkIsVUFBSSxHQUFKLElBQUksQ0FBUTtRQTVCTixpQkFBVyxHQUFXLGlCQUFpQixDQUFDO1FBRWpELHlCQUFtQixHQUN4QixpREFBaUQsQ0FBQztRQUU3QyxXQUFLLEdBQVU7WUFDcEIsa0JBQWtCLEVBQUUsU0FBUztZQUM3QixXQUFXLEVBQUUsU0FBUztZQUN0QixlQUFlLEVBQUUsSUFBSTtZQUNyQixtQkFBbUIsRUFBRTtnQkFDbkIsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLFVBQVUsRUFBRSxFQUFFO2dCQUNkLGFBQWEsRUFBRSxLQUFLO2dCQUNwQixTQUFTLEVBQUUsU0FBUzthQUNyQjtZQUNELGVBQWUsRUFBRTtnQkFDZixNQUFNLEVBQUUsU0FBUztnQkFDakIsU0FBUyxFQUFFLFNBQVM7Z0JBQ3BCLFVBQVUsRUFBRSxFQUFFO2dCQUNkLGFBQWEsRUFBRSxLQUFLO2dCQUNwQixXQUFXLEVBQUUsS0FBSztnQkFDbEIsa0JBQWtCLEVBQUUsS0FBSzthQUMxQjtTQUNGLENBQUM7UUFpQkssaUJBQVc7Ozs7UUFBRyxVQUFDLEtBQWlCO1lBQ3JDLENBQUMsbUJBQUEsS0FBSyxDQUFDLGFBQWEsRUFBZSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDNUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUMvQixDQUFDLEVBQUM7UUFFSyx1QkFBaUI7OztRQUFHO1lBQ3pCLE9BQUEsS0FBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLEtBQUssT0FBTztnQkFDakQsS0FBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEtBQUssYUFBYTtRQUQxRCxDQUMwRCxFQUFDO1FBRXRELGlCQUFXOzs7O1FBQUcsVUFBQyxLQUFZO1lBQ2hDLEtBQUksQ0FBQyxJQUFJLENBQUMsR0FBRzs7O1lBQUM7Z0JBQ1osS0FBSSxDQUFDLEtBQUssd0JBQ0wsS0FBSyxJQUNSLGVBQWUsRUFBRTt3QkFDZixNQUFNLEVBQUUsS0FBSyxDQUFDLG1CQUFtQixDQUFDLE1BQU07d0JBQ3hDLFNBQVMsRUFBRSxLQUFLLENBQUMsbUJBQW1CLENBQUMsU0FBUzt3QkFDOUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVO3dCQUNoRCxhQUFhLEVBQUUsS0FBSyxDQUFDLG1CQUFtQixDQUFDLGFBQWE7d0JBQ3RELFdBQVcsRUFBRSxLQUFLLENBQUMsV0FBVzt3QkFDOUIsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLGtCQUFrQjtxQkFDN0MsR0FDRixDQUFDO1lBQ0osQ0FBQyxFQUFDLENBQUM7UUFDTCxDQUFDLEVBQUM7O0lBaENGLENBQUM7Ozs7SUFFRCxtQ0FBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsWUFBWSxDQUFDLGtCQUFrQixFQUFFO1lBQ3BDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxnQkFBZ0I7U0FDeEMsQ0FBQyxDQUFDO1FBQ0gsaUJBQU0sUUFBUSxXQUFFLENBQUM7SUFDbkIsQ0FBQzs7Z0JBbEdGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsa0JBQWtCO29CQUM1QixRQUFRLEVBQUUsMmxFQW1EVDtpQkFDRjs7OztnREFnQ0ksTUFBTSxTQUFDLFVBQVU7Ozt3QkFBQyxjQUFNLE9BQUEsa0JBQWtCLEVBQWxCLENBQWtCLEVBQUM7Z0JBNUk5QyxNQUFNOzs7eUJBOEdMLFlBQVksU0FBQyxRQUFRO3lCQUNyQixZQUFZLFNBQUMsUUFBUTttQ0FFckIsS0FBSzs4QkFDTCxLQUFLO3NDQUNMLEtBQUs7O0lBK0RSLHVCQUFDO0NBQUEsQUE1SEQsQ0F1RHNDLFVBQVUsR0FxRS9DO1NBckVZLGdCQUFnQjs7O0lBQzNCLGtDQUF3RDs7SUFDeEQsa0NBQXdEOztJQUV4RCw0Q0FBMkM7O0lBQzNDLHVDQUF3RDs7SUFDeEQsK0NBRW9EOztJQUVwRCxpQ0FrQkU7O0lBaUJGLHVDQUdFOztJQUVGLDZDQUU2RDs7SUFFN0QsdUNBY0U7O0lBckNBLCtDQUMrQjs7Ozs7SUFDL0IsZ0NBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgSW5qZWN0LFxuICBmb3J3YXJkUmVmLFxuICBOZ1pvbmUsXG4gIENvbnRlbnRDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgVGVtcGxhdGVSZWYsXG4gIE9uSW5pdCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IGNvbm5lY3RWb2ljZVNlYXJjaCB9IGZyb20gJ2luc3RhbnRzZWFyY2guanMvZXMvY29ubmVjdG9ycyc7XG5pbXBvcnQgeyBCYXNlV2lkZ2V0IH0gZnJvbSAnLi4vYmFzZS13aWRnZXQnO1xuaW1wb3J0IHsgTmdBaXNJbnN0YW50U2VhcmNoIH0gZnJvbSAnLi4vaW5zdGFudHNlYXJjaC9pbnN0YW50c2VhcmNoJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi91dGlscyc7XG5cbnR5cGUgU3RhdHVzID1cbiAgfCAnaW5pdGlhbCdcbiAgfCAnYXNraW5nUGVybWlzc2lvbidcbiAgfCAnd2FpdGluZydcbiAgfCAncmVjb2duaXppbmcnXG4gIHwgJ2ZpbmlzaGVkJ1xuICB8ICdlcnJvcic7XG5cbnR5cGUgRXJyb3JDb2RlID1cbiAgfCAnbm8tc3BlZWNoJ1xuICB8ICdhYm9ydGVkJ1xuICB8ICdhdWRpby1jYXB0dXJlJ1xuICB8ICduZXR3b3JrJ1xuICB8ICdub3QtYWxsb3dlZCdcbiAgfCAnc2VydmljZS1ub3QtYWxsb3dlZCdcbiAgfCAnYmFkLWdyYW1tYXInXG4gIHwgJ2xhbmd1YWdlLW5vdC1zdXBwb3J0ZWQnO1xuXG50eXBlIFRlbXBsYXRlQ29udGV4dCA9IHtcbiAgc3RhdHVzOiBTdGF0dXM7XG4gIHRyYW5zY3JpcHQ6IHN0cmluZztcbiAgaXNTcGVlY2hGaW5hbDogYm9vbGVhbjtcbiAgZXJyb3JDb2RlPzogRXJyb3JDb2RlO1xuICBpc0Jyb3dzZXJTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gIGlzTGlzdGVuaW5nOiBib29sZWFuO1xufTtcblxudHlwZSBWb2ljZUxpc3RlbmluZ1N0YXRlID0ge1xuICBzdGF0dXM6IFN0YXR1cztcbiAgdHJhbnNjcmlwdDogc3RyaW5nO1xuICBpc1NwZWVjaEZpbmFsOiBib29sZWFuO1xuICBlcnJvckNvZGU/OiBFcnJvckNvZGU7XG59O1xuXG50eXBlIFN0YXRlID0ge1xuICBpc0Jyb3dzZXJTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gIGlzTGlzdGVuaW5nOiBib29sZWFuO1xuICB0b2dnbGVMaXN0ZW5pbmc6ICgpID0+IHZvaWQ7XG4gIHZvaWNlTGlzdGVuaW5nU3RhdGU6IFZvaWNlTGlzdGVuaW5nU3RhdGU7XG4gIHRlbXBsYXRlQ29udGV4dDogVGVtcGxhdGVDb250ZXh0O1xufTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYWlzLXZvaWNlLXNlYXJjaCcsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBbY2xhc3NdPVwiY3goKVwiPlxuICAgICAgPGJ1dHRvblxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgW2NsYXNzXT1cImN4KCdidXR0b24nKVwiXG4gICAgICAgIFt0aXRsZV09XCJzdGF0ZS5pc0Jyb3dzZXJTdXBwb3J0ZWQgPyBidXR0b25UaXRsZSA6IGRpc2FibGVkQnV0dG9uVGl0bGVcIlxuICAgICAgICBbZGlzYWJsZWRdPVwiIXN0YXRlLmlzQnJvd3NlclN1cHBvcnRlZFwiXG4gICAgICAgIChjbGljayk9XCJoYW5kbGVDbGljaygkZXZlbnQpXCJcbiAgICAgID5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImJ1dHRvbiA/IGJ1dHRvbiA6IGRlZmF1bHRCdXR0b247IGNvbnRleHQ6IHN0YXRlLnRlbXBsYXRlQ29udGV4dFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9idXR0b24+XG4gICAgICA8ZGl2IFtjbGFzc109XCJjeCgnc3RhdHVzJylcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cInN0YXR1cyA/IHN0YXR1cyA6IGRlZmF1bHRTdGF0dXM7IGNvbnRleHQ6IHN0YXRlLnRlbXBsYXRlQ29udGV4dFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8bmctdGVtcGxhdGUgI2RlZmF1bHRCdXR0b24gbGV0LXN0YXR1cz1cInN0YXR1c1wiIGxldC1lcnJvckNvZGU9XCJlcnJvckNvZGVcIiBsZXQtaXNMaXN0ZW5pbmc9XCJpc0xpc3RlbmluZ1wiPlxuICAgICAgPHN2Z1xuICAgICAgICB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnXG4gICAgICAgIHdpZHRoPScxNidcbiAgICAgICAgaGVpZ2h0PScxNidcbiAgICAgICAgdmlld0JveD0nMCAwIDI0IDI0J1xuICAgICAgICBmaWxsPSdub25lJ1xuICAgICAgICBzdHJva2U9J2N1cnJlbnRDb2xvcidcbiAgICAgICAgc3Ryb2tlV2lkdGg9JzInXG4gICAgICAgIHN0cm9rZUxpbmVjYXA9J3JvdW5kJ1xuICAgICAgICBzdHJva2VMaW5lam9pbj0ncm91bmQnXG4gICAgICA+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc05vdEFsbG93ZWRFcnJvcigpOyB0aGVuIGVycm9yU3ZnQ29udGVudCBlbHNlIG5vcm1hbFN2Z0NvbnRlbnRcIj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjZXJyb3JTdmdDb250ZW50PlxuICAgICAgICAgIDxsaW5lIHgxPVwiMVwiIHkxPVwiMVwiIHgyPVwiMjNcIiB5Mj1cIjIzXCI+PC9saW5lPlxuICAgICAgICAgIDxwYXRoIGQ9XCJNOSA5djNhMyAzIDAgMCAwIDUuMTIgMi4xMk0xNSA5LjM0VjRhMyAzIDAgMCAwLTUuOTQtLjZcIj48L3BhdGg+XG4gICAgICAgICAgPHBhdGggZD1cIk0xNyAxNi45NUE3IDcgMCAwIDEgNSAxMnYtMm0xNCAwdjJhNyA3IDAgMCAxLS4xMSAxLjIzXCI+PC9wYXRoPlxuICAgICAgICAgIDxsaW5lIHgxPVwiMTJcIiB5MT1cIjE5XCIgeDI9XCIxMlwiIHkyPVwiMjNcIj48L2xpbmU+XG4gICAgICAgICAgPGxpbmUgeDE9XCI4XCIgeTE9XCIyM1wiIHgyPVwiMTZcIiB5Mj1cIjIzXCI+PC9saW5lPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8bmctdGVtcGxhdGUgI25vcm1hbFN2Z0NvbnRlbnQ+XG4gICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTIgMWEzIDMgMCAwIDAtMyAzdjhhMyAzIDAgMCAwIDYgMFY0YTMgMyAwIDAgMC0zLTN6XCJcbiAgICAgICAgICAgIFthdHRyLmZpbGxdPVwiaXNMaXN0ZW5pbmcgPyAnY3VycmVudENvbG9yJyA6ICdub25lJ1wiXG4gICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgICA8cGF0aCBkPVwiTTE5IDEwdjJhNyA3IDAgMCAxLTE0IDB2LTJcIj48L3BhdGg+XG4gICAgICAgICAgPGxpbmUgeDE9XCIxMlwiIHkxPVwiMTlcIiB4Mj1cIjEyXCIgeTI9XCIyM1wiPjwvbGluZT5cbiAgICAgICAgICA8bGluZSB4MT1cIjhcIiB5MT1cIjIzXCIgeDI9XCIxNlwiIHkyPVwiMjNcIj48L2xpbmU+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICA8L3N2Zz5cbiAgICA8L25nLXRlbXBsYXRlPlxuICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdFN0YXR1cyBsZXQtdHJhbnNjcmlwdD1cInRyYW5zY3JpcHRcIj5cbiAgICAgIDxwPnt7dHJhbnNjcmlwdH19PC9wPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIGAsXG59KVxuZXhwb3J0IGNsYXNzIE5nQWlzVm9pY2VTZWFyY2ggZXh0ZW5kcyBCYXNlV2lkZ2V0IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQENvbnRlbnRDaGlsZCgnYnV0dG9uJykgYnV0dG9uOiBUZW1wbGF0ZVJlZjxFbGVtZW50UmVmPjtcbiAgQENvbnRlbnRDaGlsZCgnc3RhdHVzJykgc3RhdHVzOiBUZW1wbGF0ZVJlZjxFbGVtZW50UmVmPjtcblxuICBASW5wdXQoKSBwdWJsaWMgc2VhcmNoQXNZb3VTcGVhaz86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHB1YmxpYyBidXR0b25UaXRsZTogc3RyaW5nID0gJ1NlYXJjaCBieSB2b2ljZSc7XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBkaXNhYmxlZEJ1dHRvblRpdGxlOiBzdHJpbmcgPVxuICAgICdTZWFyY2ggYnkgdm9pY2UgKG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyKSc7XG5cbiAgcHVibGljIHN0YXRlOiBTdGF0ZSA9IHtcbiAgICBpc0Jyb3dzZXJTdXBwb3J0ZWQ6IHVuZGVmaW5lZCxcbiAgICBpc0xpc3RlbmluZzogdW5kZWZpbmVkLFxuICAgIHRvZ2dsZUxpc3RlbmluZzogbm9vcCxcbiAgICB2b2ljZUxpc3RlbmluZ1N0YXRlOiB7XG4gICAgICBzdGF0dXM6ICdpbml0aWFsJyxcbiAgICAgIHRyYW5zY3JpcHQ6ICcnLFxuICAgICAgaXNTcGVlY2hGaW5hbDogZmFsc2UsXG4gICAgICBlcnJvckNvZGU6IHVuZGVmaW5lZCxcbiAgICB9LFxuICAgIHRlbXBsYXRlQ29udGV4dDoge1xuICAgICAgc3RhdHVzOiAnaW5pdGlhbCcsXG4gICAgICBlcnJvckNvZGU6IHVuZGVmaW5lZCxcbiAgICAgIHRyYW5zY3JpcHQ6ICcnLFxuICAgICAgaXNTcGVlY2hGaW5hbDogZmFsc2UsXG4gICAgICBpc0xpc3RlbmluZzogZmFsc2UsXG4gICAgICBpc0Jyb3dzZXJTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IE5nQWlzSW5zdGFudFNlYXJjaCkpXG4gICAgcHVibGljIGluc3RhbnRTZWFyY2hQYXJlbnQ6IGFueSxcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZVxuICApIHtcbiAgICBzdXBlcignVm9pY2VTZWFyY2gnKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuY3JlYXRlV2lkZ2V0KGNvbm5lY3RWb2ljZVNlYXJjaCwge1xuICAgICAgc2VhcmNoQXNZb3VTcGVhazogdGhpcy5zZWFyY2hBc1lvdVNwZWFrLFxuICAgIH0pO1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcbiAgICAoZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCkuYmx1cigpO1xuICAgIHRoaXMuc3RhdGUudG9nZ2xlTGlzdGVuaW5nKCk7XG4gIH07XG5cbiAgcHVibGljIGlzTm90QWxsb3dlZEVycm9yID0gKCk6IGJvb2xlYW4gPT5cbiAgICB0aGlzLnN0YXRlLnZvaWNlTGlzdGVuaW5nU3RhdGUuc3RhdHVzID09PSAnZXJyb3InICYmXG4gICAgdGhpcy5zdGF0ZS52b2ljZUxpc3RlbmluZ1N0YXRlLmVycm9yQ29kZSA9PT0gJ25vdC1hbGxvd2VkJztcblxuICBwdWJsaWMgdXBkYXRlU3RhdGUgPSAoc3RhdGU6IFN0YXRlKTogdm9pZCA9PiB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgdGVtcGxhdGVDb250ZXh0OiB7XG4gICAgICAgICAgc3RhdHVzOiBzdGF0ZS52b2ljZUxpc3RlbmluZ1N0YXRlLnN0YXR1cyxcbiAgICAgICAgICBlcnJvckNvZGU6IHN0YXRlLnZvaWNlTGlzdGVuaW5nU3RhdGUuZXJyb3JDb2RlLFxuICAgICAgICAgIHRyYW5zY3JpcHQ6IHN0YXRlLnZvaWNlTGlzdGVuaW5nU3RhdGUudHJhbnNjcmlwdCxcbiAgICAgICAgICBpc1NwZWVjaEZpbmFsOiBzdGF0ZS52b2ljZUxpc3RlbmluZ1N0YXRlLmlzU3BlZWNoRmluYWwsXG4gICAgICAgICAgaXNMaXN0ZW5pbmc6IHN0YXRlLmlzTGlzdGVuaW5nLFxuICAgICAgICAgIGlzQnJvd3NlclN1cHBvcnRlZDogc3RhdGUuaXNCcm93c2VyU3VwcG9ydGVkLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcbn1cbiJdfQ==